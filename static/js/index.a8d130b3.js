(()=>{"use strict";var e={6026:function(e,i,t){var r=t("651"),s=t("4303"),n=t("2379");t("1114");var l=t("6199"),a=t("2312");let d={MODERNJS_FRAMEWORK:"modernjs-framework",RSBUILD:"rsbuild",RSLIB:"rslib",RSPRESS:"rspress",RSPACK:"rspack"},c={BUNDLE_SIZE:"bundle-size",COMPILE_SPEED:"compile-speed",INSTALL_SPEED:"install-speed",CLI_SPEED:"cli-speed"},o={[d.MODERNJS_FRAMEWORK]:["app-minimal","app-initial","app-initial-rspack","app-tailwind","app-ssr","app-ssg","app-bff-koa","app-arco-pro","app-arco-pro-swc","app-arco-pro-esbuild","app-arco-pro-rspack"],[d.RSPRESS]:["rspress-minimal","rspress-website","rspress-website-mdxjs"],[d.RSBUILD]:["rsbuild-react","rsbuild-react-app-10k","rsbuild-arco-pro","rsbuild-vue3","rsbuild-lit","rsbuild-svelte","rsbuild-vanilla"],[d.RSLIB]:["rslib-node-basic","rslib-react-basic"]},m={[d.MODERNJS_FRAMEWORK]:["app-initial","app-initial-rspack"],[d.RSPRESS]:["rspress-website","rspress-website-mdxjs"],[d.RSBUILD]:["rsbuild-react","rsbuild-arco-pro"],[d.RSLIB]:["rslib-node-basic","rslib-react-basic"]},u={[d.MODERNJS_FRAMEWORK]:["minifiedBundleSize","gzippedBundleSize"],[d.RSPRESS]:["gzipInitialJsSize","initialJsSize","minifiedBundleSize","gzippedBundleSize"],[d.RSBUILD]:["minifiedBundleSize","gzippedBundleSize"],[d.RSLIB]:["esmBundleSize","cjsBundleSize","esmGzipBundleSize","cjsGzipBundleSize"]},p={[d.MODERNJS_FRAMEWORK]:["app-arco-pro","app-arco-pro-rspack"],[d.RSPRESS]:["rspress-website","rspress-website-mdxjs"],[d.RSBUILD]:["rsbuild-react","rsbuild-arco-pro"],[d.RSLIB]:["rslib-node-basic","rslib-react-basic"]},x={[d.MODERNJS_FRAMEWORK]:["buildColdBootTime","buildHotBootTime","beforeBuildTime","buildPluginSetupTime","buildPrepareTime","devColdBootTime","devHotBootTime","beforeDevTime","devPluginSetupTime","devPrepareTime"],[d.RSPRESS]:["buildColdBootTime","devColdBootTime","beforeBuildTime","beforeDevTime","routeGenerateTime"],[d.RSBUILD]:["buildColdBootTime","devColdBootTime","beforeBuildTime","beforeDevTime"],[d.RSLIB]:["buildEsmTotalTime","buildCjsTotalTime","buildEsmJsTime","buildCjsJsTime","beforeBuildTime"]},S={[d.MODERNJS_FRAMEWORK]:["app-initial","app-initial-rspack"],[d.RSPRESS]:["rspress-minimal","rspress-website"],[d.RSBUILD]:["rsbuild-vanilla","rsbuild-react"],[d.RSLIB]:["rslib-node-basic","rslib-react-basic"]},h=["installSize","dependenciesCount","coldInstallTime","hotInstallTime"],f={[d.MODERNJS_FRAMEWORK]:h,[d.RSPRESS]:h,[d.RSBUILD]:h,[d.RSLIB]:h},b={height:400,seriesField:"category",xField:"x",yField:"y",xAxis:{label:{formatter:e=>e.split(" ")[0]},nice:!0},yAxis:{nice:!0},point:{size:3},stepType:"vh"},j=l.zo.div`
  position: fixed;
  display: flex;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  height: 56px;
  padding: 4px ${24}px;
  background-color: #fff;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid #e8e8e8;
`,R=l.zo.div`
  display: flex;
  font-size: 18px;
  align-items: center;
  color: #111;
`,g=l.zo.img`
  height: 100%;
`,E=l.zo.div`
  width: 48px;
  height: 36px;
  overflow: hidden;
  margin-right: 16px;
`,y=l.zo.a`
  display: flex;
  align-items: center;
  font-size: 28px;
  color: #222;
`,I=()=>(0,r.jsx)(y,{target:"_blank",href:"https://github.com/web-infra-dev/web-infra-QoS",children:(0,r.jsx)(a.Z,{})}),v=()=>(0,r.jsxs)(j,{className:"nav-bar",children:[(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:(0,r.jsx)(g,{src:"/web-infra.png"})}),"Web Infra QoS Dashboard"]}),(0,r.jsx)(I,{})]});t("7939");var B=t("4450"),D=t("8329"),T=t("3100"),N=t("3890"),_=t("3112"),L=t("2703"),M=t("3603"),w=t("1431"),O=t("7583"),P=t("353");let Z=P.Z.Item,C=P.Z.SubMenu,$={display:"flex",alignItems:"center",height:38,fontSize:13},z=l.zo.div`
  position: fixed;
  top: 56px;
  left: 0;
  bottom: 0;
  width: 260px;
  background: #fff;
  overflow: auto;
`,A=e=>(0,r.jsx)(z,{children:(0,r.jsxs)(P.Z,{mode:"vertical",style:{padding:"16px 4px",fontSize:15},openKeys:e.openKeys,selectedKeys:e.selectedKeys,onClickMenuItem:e.onClickMenuItem,onClickSubMenu:e.onClickSubMenu,children:[(0,r.jsxs)(C,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{})," Rsbuild"]}),children:[(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(N.Z,{}),"Compile Speed"]},`${d.RSBUILD}_${c.COMPILE_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(T.Z,{}),"Install Speed"]},`${d.RSBUILD}_${c.INSTALL_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(_.Z,{}),"Bundle Size"]},`${d.RSBUILD}_${c.BUNDLE_SIZE}`)]},d.RSBUILD),(0,r.jsx)(C,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{})," Rspack"]}),children:(0,r.jsxs)(Z,{children:[(0,r.jsx)(L.Z,{}),(0,r.jsx)("span",{style:{marginLeft:"4px"},children:"Benchmark"})]},d.RSPACK)},d.RSPACK),(0,r.jsxs)(C,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Z,{})," Rspress"]}),children:[(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(N.Z,{}),"Compile Speed"]},`${d.RSPRESS}_${c.COMPILE_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(T.Z,{}),"Install Speed"]},`${d.RSPRESS}_${c.INSTALL_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(_.Z,{}),"Bundle Size"]},`${d.RSPRESS}_${c.BUNDLE_SIZE}`)]},d.RSPRESS),(0,r.jsxs)(C,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.Z,{})," Rslib"]}),children:[(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(N.Z,{}),"Compile Speed"]},`${d.RSLIB}_${c.COMPILE_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(T.Z,{}),"Install Speed"]},`${d.RSLIB}_${c.INSTALL_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(_.Z,{}),"Bundle Size"]},`${d.RSLIB}_${c.BUNDLE_SIZE}`)]},d.RSLIB),(0,r.jsxs)(C,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{})," Modern.js"]}),children:[(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(N.Z,{}),"Compile Speed"]},`${d.MODERNJS_FRAMEWORK}_${c.COMPILE_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(T.Z,{}),"Install Speed"]},`${d.MODERNJS_FRAMEWORK}_${c.INSTALL_SPEED}`),(0,r.jsxs)(Z,{style:$,children:[(0,r.jsx)(_.Z,{}),"Bundle Size"]},`${d.MODERNJS_FRAMEWORK}_${c.BUNDLE_SIZE}`)]},d.MODERNJS_FRAMEWORK)]})});t("9973"),t("8147");var k=t("4067"),K=t("2081"),F=t("1725");t("2935"),t("8333"),t("9366"),t("2734"),t("2706");var U=t("4661"),J=t("4834"),W=t("5078"),H=t("4688"),G=t("6282");let Q=e=>{var i;let{productName:t,metrics:s,initialCase:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.Z.Title,{heading:6,style:{marginBottom:24},children:"Add category by Cases and Metrics:"}),(0,r.jsxs)(G.Z.Row,{gutter:40,children:[(0,r.jsx)(G.Z.Col,{span:8,children:(0,r.jsx)(H.Z.Item,{label:"Cases",field:"caseName",initialValue:n[0],style:{marginBottom:8},children:(0,r.jsx)(J.Z,{children:null===(i=o[t])||void 0===i?void 0:i.map(e=>(0,r.jsx)(J.Z.Option,{value:e,children:e},e))})})}),(0,r.jsx)(G.Z.Col,{span:8,children:(0,r.jsx)(H.Z.Item,{label:"Metrics",field:"metricsName",initialValue:s[0],style:{marginBottom:8},children:(0,r.jsx)(J.Z,{children:s.map(e=>(0,r.jsx)(J.Z.Option,{value:e,children:e},e))})})}),(0,r.jsx)(G.Z.Col,{span:8,children:(0,r.jsx)(W.Z,{type:"primary",htmlType:"submit",style:{width:80},children:"Add"})})]})]})},V=e=>(0,r.jsxs)(K.Z,{bordered:!1,style:{marginBottom:24},children:[(0,r.jsx)(H.Z,{layout:"horizontal",labelAlign:"left",onSubmit:e.handleAddData,children:(0,r.jsx)(Q,{...e})}),e.renderChoicesTags()]}),Y=(e,i)=>{let[t,s]=(0,n.useState)([{case:e[0],metric:i},{case:e[1],metric:i}]),l=e=>{let i=[...t];i.splice(e,1),s(i)};return{categories:t,handleAddData:e=>{let i={case:e.caseName,metric:e.metricsName};!t.some(i=>i.case===e.caseName&&i.metric===e.metricsName)&&s([...t,i])},renderChoicesTags:()=>(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",marginTop:24},children:t.map((e,i)=>(0,r.jsx)("div",{style:{marginRight:12,marginBottom:12},children:(0,r.jsx)(U.Z,{closable:!0,onClose:()=>l(i),children:`${e.case} + ${e.metric}`},`${e.case}_${e.metric}`)},i))})}};var q=t("5829");let X=async e=>{let i=await q.getItem(e).catch(()=>{});if(i){let{data:e,timestamp:t}=i,r=new Date().getTime();if(r-t<=432e5)return e}let t=await fetch(e).then(e=>e.json()).catch(()=>{});if(t){let i={data:t,timestamp:new Date().getTime()};await q.setItem(e,i)}return t},ee=async(e,i)=>{let t=await X(`/data/${e}/${i}.json`);return Object.keys(t).map(e=>({id:e,time:t[e].time,metrics:t[e]}))};var ei=t("7651"),et=t.n(ei);let er=e=>et()(e).format("YY-MM-DD HH:mm"),es=e=>`${er(e.time)}（${e.id}）`,en=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KB";return"KB"===i?e/=1024:"MB"===i&&(e=e/1024/1024),Number(e.toFixed(2))},el=e=>Number((e/1e3).toFixed(2)),ea=(e,i,t)=>{let r=[];return e.forEach((e,s)=>{let n=e.map(e=>({...e,caseName:i[s],metricsName:t[s]}));r.push(...n)}),r.sort((e,i)=>e.time-i.time).filter(e=>e.metrics[e.metricsName])},ed=(e,i,t)=>ea(e,i,t).map(e=>({category:`${e.caseName} + ${e.metricsName}`,x:es(e),y:en(e.metrics[e.metricsName])})),ec=e=>{let i=e.productIndex,t=(0,n.useRef)(null),s=(0,n.useRef)(null),{categories:l,handleAddData:a,renderChoicesTags:c}=Y(m[i],u[i][0]),o=l.map(e=>e.case),p=l.map(e=>e.metric),x=e=>{let{root:t,results:r,caseNames:n,metricsNames:l}=e,a=ed(r,n,l);s.current?s.current.changeData(a):t&&(s.current=new F.x1(t,{...b,data:a,yAxis:{label:{formatter:e=>`${e} KB`},nice:!0},tooltip:{fields:["x","y","category"],formatter:e=>({name:e.category,value:`${e.y} KB`})},slider:{start:i===d.MODERNJS_FRAMEWORK?.85:0,end:1}}),s.current.render())};return(0,n.useEffect)(()=>{(async()=>{let e=o.map(e=>ee(i,e));x({results:await Promise.all(e),caseNames:o,metricsNames:p,root:t.current})})()},[l]),(0,r.jsxs)("div",{style:{padding:24},children:[(0,r.jsx)(V,{productName:i,metrics:u[i],initialCase:m[i],handleAddData:a,renderChoicesTags:c}),(0,r.jsxs)(K.Z,{bordered:!1,style:{height:464},children:[(0,r.jsx)(k.Z.Title,{heading:5,style:{marginTop:0},children:"Trending"}),(0,r.jsx)("div",{ref:t})]})]})},eo=(e,i,t)=>ea(e,i,t).map(e=>({category:`${e.caseName} + ${e.metricsName}`,x:es(e),y:el(e.metrics[e.metricsName])})),em=e=>{let i=e.productIndex,t=(0,n.useRef)(null),s=(0,n.useRef)(null),{categories:l,handleAddData:a,renderChoicesTags:c}=Y(p[i],x[i][0]),o=l.map(e=>e.case),m=l.map(e=>e.metric),u=e=>{let{root:t,results:r,caseNames:n,metricsNames:l}=e,a=eo(r,n,l);s.current?s.current.changeData(a):t&&(s.current=new F.x1(t,{...b,data:a,yAxis:{label:{formatter:e=>`${e} s`},nice:!0},tooltip:{fields:["x","y","category"],formatter:e=>({name:e.category,value:e.y+"s"})},slider:{start:i===d.MODERNJS_FRAMEWORK?.85:0,end:1}}),s.current.render())};return(0,n.useEffect)(()=>{(async()=>{let e=o.map(e=>ee(i,e));u({results:await Promise.all(e),caseNames:o,metricsNames:m,root:t.current})})()},[l]),(0,r.jsxs)("div",{style:{padding:24},children:[(0,r.jsx)(V,{productName:i,metrics:x[i],initialCase:p[i],handleAddData:a,renderChoicesTags:c}),(0,r.jsxs)(K.Z,{bordered:!1,style:{height:464},children:[(0,r.jsx)(k.Z.Title,{heading:5,style:{marginTop:0},children:"Trending"}),(0,r.jsx)("div",{ref:t})]})]})},eu=(e,i,t)=>ea(e,i,t).map(e=>{let i;let t=e.metrics[e.metricsName];switch(e.metricsName){case"installSize":i=en(t,"MB");break;case"hotInstallTime":case"coldInstallTime":i=el(t);break;default:i=t}return{metricsName:e.metricsName,category:`${e.caseName} + ${e.metricsName}`,x:es(e),y:i}}),ep=e=>{let i=e.productIndex,t=(0,n.useRef)(null),s=(0,n.useRef)(null),{categories:l,handleAddData:a,renderChoicesTags:c}=Y(S[i],f[i][0]),o=l.map(e=>e.case),m=l.map(e=>e.metric),u=e=>{let{root:t,results:r,caseNames:n,metricsNames:l}=e,a=eu(r,n,l);s.current?s.current.changeData(a):t&&(s.current=new F.x1(t,{...b,data:a,tooltip:{fields:["x","y","category","metricsName"],formatter:e=>{let i=e.y;return"installSize"===e.metricsName&&(i+="MB"),("coldInstallTime"===e.metricsName||"hotInstallTime"===e.metricsName)&&(i+="s"),{name:e.category,value:i}}},slider:{start:i===d.MODERNJS_FRAMEWORK?.85:0,end:1}}),s.current.render())};return(0,n.useEffect)(()=>{(async()=>{let e=o.map(e=>ee(i,e));u({results:await Promise.all(e),caseNames:o,metricsNames:m,root:t.current})})()},[l]),(0,r.jsxs)("div",{style:{padding:24},children:[(0,r.jsx)(V,{productName:i,metrics:f[i],initialCase:S[i],handleAddData:a,renderChoicesTags:c}),(0,r.jsxs)(K.Z,{bordered:!1,style:{height:464},children:[(0,r.jsx)(k.Z.Title,{heading:5,style:{marginTop:0},children:"Trending"}),(0,r.jsx)("div",{ref:t})]})]})},ex=e=>(0,r.jsx)("div",{style:{padding:24},children:"WIP"}),eS=e=>(0,r.jsx)("div",{style:{marginLeft:260,marginTop:56},children:(()=>{if(e.productIndex===d.RSPACK)return(0,r.jsx)("div",{style:{padding:24},children:(0,r.jsx)("div",{children:(0,r.jsx)("iframe",{src:"https://web-infra-dev.github.io/rspack-ecosystem-benchmark/",title:"Rspack Benchmark",style:{width:"100%",height:"900px"}})})});switch(e.menuIndex){case c.BUNDLE_SIZE:return(0,r.jsx)(ec,{productIndex:e.productIndex});case c.COMPILE_SPEED:return(0,r.jsx)(em,{productIndex:e.productIndex});case c.INSTALL_SPEED:return(0,r.jsx)(ep,{productIndex:e.productIndex});case c.CLI_SPEED:return(0,r.jsx)(ex,{productIndex:e.productIndex})}return null})()}),eh=l.zo.div`
  min-height: 100vh;
`,ef="web-infra-dev.github.io"===window.location.hostname?"/web-infra-QoS/index":"";(0,t("6254").createRoot)(document.getElementById("root")).render((0,r.jsx)(()=>{let e=new URLSearchParams(window.location.search),i=e.get("product")||d.RSBUILD,t=e.get("metrics")||c.COMPILE_SPEED,[l,a]=(0,n.useState)(i),[o,m]=(0,n.useState)(t),[u,p]=(0,n.useState)([d.RSBUILD,d.RSPACK,d.RSPRESS,d.RSLIB,d.MODERNJS_FRAMEWORK]),[x,S]=(0,n.useState)([`${i}_${t}`]);return(0,n.useEffect)(()=>{window.history.replaceState(null,"",`${ef}?product=${l}&metrics=${o}`)},[l,o]),(0,r.jsx)(s.VK,{basename:ef,children:(0,r.jsxs)(eh,{children:[(0,r.jsx)(v,{}),(0,r.jsx)(A,{openKeys:u,selectedKeys:x,onClickMenuItem:e=>{a(e.split("_")[0]),m(e.split("_")[1]),S([e])},onClickSubMenu:e=>{u.includes(e)?p(u.filter(i=>i!==e)):p([...u,e])}}),(0,r.jsx)(s.Z5,{children:(0,r.jsx)(s.AW,{path:"/",element:(0,r.jsx)(eS,{productIndex:l,menuIndex:o},l)})})]})})},{}))}},i={};function t(r){var s=i[r];if(void 0!==s)return s.exports;var n=i[r]={id:r,loaded:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,{a:i}),i},t.d=function(e,i){for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},t.nc=void 0,(()=>{var e=[];t.O=function(i,r,s,n){if(r){n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[r,s,n];return}for(var a=1/0,l=0;l<e.length;l++){for(var r=e[l][0],s=e[l][1],n=e[l][2],d=!0,c=0;c<r.length;c++)(!1&n||a>=n)&&Object.keys(t.O).every(function(e){return t.O[e](r[c])})?r.splice(c--,1):(d=!1,n<a&&(a=n));if(d){e.splice(l--,1);var o=s();void 0!==o&&(i=o)}}return i}})(),t.rv=function(){return"1.1.6"},(()=>{var e={980:0};t.O.j=function(i){return 0===e[i]};var i=function(i,r){var s=r[0],n=r[1],l=r[2],a,d,c=0;if(s.some(function(i){return 0!==e[i]})){for(a in n)t.o(n,a)&&(t.m[a]=n[a]);if(l)var o=l(t)}for(i&&i(r);c<s.length;c++)d=s[c],t.o(e,d)&&e[d]&&e[d][0](),e[d]=0;return t.O(o)},r=self.webpackChunkwebsite=self.webpackChunkwebsite||[];r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r))})(),t.ruid="bundler=rspack@1.1.6";var r=t.O(void 0,["361","118","935"],function(){return t("6026")});r=t.O(r)})();